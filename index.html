<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AhavatFit - Фитнес для мусульманских женщин</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="index.css" />
  <script type="importmap">
{
  "imports": {
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.16.0"
  }
}
</script>
</head>
  <body>
    <div id="loading-overlay" class="loading-overlay" style="display: none;">
      <div class="spinner-large"></div>
      <p>Загрузка...</p>
    </div>

    <div id="auth-wrapper" style="display: none;">
      <section id="login-section" class="auth-page">
        <div class="auth-container">
          <header class="auth-header">
              <i class="fas fa-heart logo-icon"></i>
              <h1 class="logo-text">AhavatFit</h1>
          </header>
  
          <div class="welcome-text">
              <h2>С возвращением!</h2>
              <p>Рады видеть вас снова в AhavatFit.</p>
          </div>
  
          <form id="login-form">
              <div class="input-group">
                  <i class="fas fa-envelope"></i>
                  <input type="email" id="login-email" placeholder="Email" required>
              </div>
              <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input type="password" id="login-password" placeholder="Пароль" required>
              </div>
              <a href="#" class="forgot-password">Забыли пароль?</a>
              <div id="login-error-message" class="error-message"></div>
              <button type="submit" class="btn btn-primary" id="login-submit-btn">Войти</button>
          </form>
  
          <div class="divider"><span>или</span></div>
  
          <div class="social-login">
              <button class="btn btn-social" type="button" id="google-login-btn">
                  <i class="fab fa-google"></i>
                  <span>Войти через Google</span>
              </button>
          </div>
  
          <div class="signup-link">
              <p>Еще нет аккаунта? <a href="#" id="goto-signup-link"><strong>Зарегистрироваться</strong></a></p>
          </div>
        </div>
      </section>

      <section id="signup-section" class="auth-page" style="display: none;">
        <div class="auth-container">
          <header class="auth-header">
              <i class="fas fa-heart logo-icon"></i>
              <h1 class="logo-text">AhavatFit</h1>
          </header>
  
          <div class="welcome-text">
              <h2>Создайте ваш аккаунт</h2>
              <p>Присоединяйтесь к нашему сообществу.</p>
          </div>
  
          <form id="signup-form">
              <div class="input-group">
                  <i class="fas fa-user"></i>
                  <input type="text" id="signup-name" placeholder="Имя" required>
              </div>
              <div class="input-group">
                  <i class="fas fa-envelope"></i>
                  <input type="email" id="signup-email" placeholder="Email" required>
              </div>
              <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input type="password" id="signup-password" placeholder="Пароль" required>
              </div>
              <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input type="password" id="signup-confirm-password" placeholder="Подтвердите пароль" required>
              </div>
              <div id="signup-error-message" class="error-message"></div>
              <button type="submit" class="btn btn-primary" id="signup-submit-btn">Зарегистрироваться</button>
          </form>
  
          <div class="login-link">
              <p>Уже есть аккаунт? <a href="#" id="goto-login-link"><strong>Войти</strong></a></p>
          </div>
        </div>
      </section>
    </div>

    <div id="app-wrapper" style="display: none;">
      <div class="container">
          <main id="home-page" class="page-section">
              <header>
                  <div class="logo">
                      <i class="fas fa-heart logo-icon"></i>
                      <div class="logo-text">AhavatFit</div>
                  </div>
                  <button class="user-avatar" id="profile-avatar-btn" role="button" tabindex="0" aria-label="Открыть профиль">
                      <i class="fas fa-user"></i>
                  </button>
              </header>
  
              <section class="welcome-section">
                  <h1>Загрузка...</h1>
                  <i class="fas fa-mosque welcome-icon"></i>
                  <div class="all-prayer-times">
                    <div class="prayer-time-item">
                      <span>Фаджр</span>
                      <strong id="home-fajr-time">--:--</strong>
                    </div>
                    <div class="prayer-time-item">
                      <span>Зухр</span>
                      <strong id="home-dhuhr-time">--:--</strong>
                    </div>
                    <div class="prayer-time-item">
                      <span>Аср</span>
                      <strong id="home-asr-time">--:--</strong>
                    </div>
                    <div class="prayer-time-item">
                      <span>Магриб</span>
                      <strong id="home-maghrib-time">--:--</strong>
                    </div>
                    <div class="prayer-time-item">
                      <span>Иша</span>
                      <strong id="home-isha-time">--:--</strong>
                    </div>
                  </div>
              </section>
  
              <section class="featured-workout">
                  <h2 id="wod-title"><i class="fas fa-crown"></i> Тренировка дня</h2>
                  <p id="wod-description">Загрузка рекомендованной тренировки...</p>
                  <button class="btn" id="wod-btn">Загрузка...</button>
              </section>
  
              <div class="section-title">
                  <i class="fas fa-hands-praying"></i>
                  <span>Дуа для здоровья</span>
              </div>
              <section class="dua-section">
                  <p class="dua-arabic" id="dua-arabic">Загрузка дуа...</p>
                  <p class="dua-translation" id="dua-translation"></p>
                  <p class="dua-source" id="dua-source"></p>
              </section>
  
              <section class="progress-section">
                  <div class="progress-header">
                      <div class="progress-title">Ваш прогресс</div>
                      <a href="#" class="details-link" id="home-progress-details-link">Подробнее</a>
                  </div>
                  
                  <div class="progress-stats">
                      <div class="stat">
                          <div class="stat-number">12</div>
                          <div class="stat-label">тренировок</div>
                      </div>
                      <div class="stat">
                          <div class="stat-number">7</div>
                          <div class="stat-label">дней подряд</div>
                      </div>
                      <div class="stat">
                          <div class="stat-number">85%</div>
                          <div class="stat-label">цель</div>
                      </div>
                  </div>
                  
                  <div class="progress-bar">
                      <div class="progress-fill"></div>
                  </div>
                  
                  <div class="progress-text">
                      <span>На этой неделе</span>
                      <span>5 из 7 дней</span>
                  </div>
              </section>
  
              <a href="#" id="ai-coach-cta" class="ai-coach-cta">
                  <div class="cta-content">
                      <h3><i class="fas fa-robot"></i> AI-тренер</h3>
                      <p>Задайте вопрос о тренировках, питании или здоровом образе жизни.</p>
                  </div>
                  <i class="fas fa-chevron-right cta-arrow"></i>
              </a>
  
          </main>
          
          <section id="workouts-page" class="page-section" style="display: none;">
              <div class="section-title" style="margin-top: 15px;">
                  <i class="fas fa-dumbbell"></i>
                  <span>Тренировки</span>
              </div>
              <div id="workout-filters" class="recipe-filters"></div>
              
              <div id="video-player-section">
                  <div class="video-player-container">
                      <div class="video-placeholder">
                          <i class="fas fa-play-circle"></i>
                          <p>Выберите тренировку из списка</p>
                      </div>
                      <!-- Video player will be dynamically inserted here -->
                  </div>
            
                  <div class="video-details">
                      <h3 class="video-title" id="video-title">Начните свой путь</h3>
                      <p class="video-description" id="video-description">Выберите одну из тренировок ниже, чтобы начать. Каждая программа разработана с учетом ваших целей.</p>
                      <div class="video-meta">
                          <span id="video-duration"><i class="fas fa-clock"></i> -- мин</span>
                          <span id="video-calories"><i class="fas fa-fire"></i> -- ккал</span>
                      </div>
                      <button class="btn" id="complete-workout-btn"><i class="fas fa-check-circle"></i> Завершить тренировку</button>
                  </div>
              </div>
          
              <div class="section-title">
                  <i class="fas fa-list-ul"></i>
                  <span>Плейлист</span>
              </div>
              <div class="playlist" id="workouts-playlist">
                  <!-- Workout playlist items will be rendered here -->
              </div>
          </section>

          <section id="ai-coach-page" class="page-section" style="display: none;">
            <div class="section-title" style="margin-top: 15px;">
                <i class="fas fa-robot"></i>
                <span>AI-тренер</span>
            </div>

            <div class="ai-response-container">
                <div id="ai-response" aria-live="polite">
                    <div class="message ai-message">Ассаляму алейкум, сестра! Меня зовут Амина, ваш личный AI-тренер. Я здесь, чтобы помочь вам на пути к здоровью и благополучию в соответствии с нашими ценностями. Чем я могу помочь сегодня?</div>
                </div>
            </div>

            <div class="ai-suggestion-chips">
              <button class="chip" data-prompt="Дай мне исламскую мотивацию для заботы о своем здоровье сегодня.">✨ Мотивация</button>
              <button class="chip" data-prompt="Предложи мне простой и здоровый рецепт для халяль-ужина по принципу Гарвардской тарелки.">🍽️ Ужин по Сунне</button>
              <button class="chip" data-prompt="Составь для меня мягкую 15-минутную тренировку на сегодня по методу де Гаске.">🤸‍♀️ Мягкая тренировка</button>
              <button class="chip" data-prompt="Какие упражнения безопасны во время менструации?">💧 Советы для цикла</button>
            </div>

            <div class="ai-input-area">
                <form id="ai-form" style="display: none;">
                    <div class="ai-input-wrapper">
                        <input type="text" id="ai-prompt" placeholder="Ваш вопрос..." required maxlength="300">
                        <button type="button" id="mic-btn" aria-label="Голосовой ввод"><i class="fas fa-microphone"></i></button>
                        <span id="char-counter">0 / 300</span>
                    </div>
                    <button type="submit" class="btn" id="ai-submit-btn"><i class="fas fa-paper-plane"></i></button>
                </form>
                <button class="btn" id="start-chat-btn" style="width: 100%;"><i class="fas fa-pen-alt"></i> Задать вопрос</button>
            </div>
          </section>
  
          <section id="recipes-page" class="page-section" style="display: none;">
              <div class="section-title" style="margin-top: 15px;">
                  <i class="fas fa-book-open"></i>
                  <span>Книга рецептов</span>
              </div>
              <div id="recipe-filters"></div>
              <div id="recipe-view"></div>
          </section>
  
          <section id="profile-page" class="page-section" style="display: none;">
              <div class="profile-header">
                  <div class="profile-avatar">М</div>
                  <div class="profile-name-container">
                      <div id="profile-name-display-container">
                          <h2 class="profile-name" id="profile-name-display">Марьям</h2>
                          <button id="edit-profile-name-btn" class="edit-name-btn" aria-label="Редактировать имя">
                              <i class="fas fa-pen"></i>
                          </button>
                      </div>
                      <div id="profile-name-input-container" class="hidden">
                          <input type="text" id="profile-name-input" class="profile-name-input" value="Марьям" maxlength="20">
                          <div class="edit-name-actions">
                              <button id="save-profile-name-btn" class="edit-name-btn" aria-label="Сохранить имя">
                                  <i class="fas fa-check"></i>
                              </button>
                              <button id="cancel-edit-profile-name-btn" class="edit-name-btn" aria-label="Отменить редактирование">
                                  <i class="fas fa-times"></i>
                              </button>
                          </div>
                      </div>
                  </div>
                  <p class="profile-joindate" id="profile-join-date">В AhavatFit с мая 2024</p>
              </div>

              <div class="section-title">
                <i class="fas fa-bullseye"></i>
                <span>Мои цели</span>
              </div>
              <div class="settings-group goals-container" id="goals-container">
                  <div class="no-goal-set">
                      <p>Цели пока не установлены. Начните свой путь к успеху!</p>
                      <button class="btn" id="set-goal-btn"><i class="fas fa-plus"></i> Установить цель</button>
                  </div>
              </div>

              <div class="section-title">
                  <i class="fas fa-calendar-week"></i>
                  <span>Обзор недели</span>
              </div>
              <div class="settings-group weekly-overview-container">
                  <div class="overview-stats">
                      <div class="summary-item">
                          <div class="value" id="overview-workouts">0</div>
                          <div class="label">Тренировок</div>
                      </div>
                      <div class="summary-item">
                          <div class="value" id="overview-time">0ч 0м</div>
                          <div class="label">Время</div>
                      </div>
                      <div class="summary-item">
                          <div class="value" id="overview-calories">0</div>
                          <div class="label">Ккал</div>
                      </div>
                  </div>
                  <p class="overview-summary" id="overview-summary">Начните неделю с тренировки, чтобы заполнить статистику!</p>
              </div>
          
              <div class="section-title">
                  <i class="fas fa-chart-line"></i>
                  <span>Ваш прогресс</span>
              </div>
              <div class="progress-container-profile">
                  <div class="progress-tabs">
                      <button class="tab-btn active" data-view="week">Неделя</button>
                      <button class="tab-btn" data-view="month">Месяц</button>
                  </div>
                  <div class="progress-content">
                      <div id="week-progress-view" class="progress-view active">
                          <div class="chart-container" id="week-chart">
                              <!-- Bar chart will be rendered here by JS -->
                          </div>
                          <div class="progress-summary" id="week-summary">
                              <!-- Weekly stats will be rendered here by JS -->
                          </div>
                      </div>
                      <div id="month-progress-view" class="progress-view" style="display: none;">
                          <div class="calendar-header" id="month-calendar-header">
                              <!-- Month name will be here -->
                          </div>
                          <div class="calendar-grid" id="month-calendar">
                              <!-- Calendar will be rendered here by JS -->
                          </div>
                          <div class="progress-summary" id="month-summary">
                               <!-- Monthly stats will be rendered here by JS -->
                          </div>
                      </div>
                  </div>
              </div>
              
              <div class="settings-group">
                  <h3 class="settings-group-title">Внешний вид</h3>
                  <div class="setting-item">
                      <label for="dark-mode-toggle">Тёмная тема</label>
                      <div class="toggle-switch">
                          <input type="checkbox" id="dark-mode-toggle">
                          <label for="dark-mode-toggle"></label>
                      </div>
                  </div>
              </div>
  
              <div class="settings-group">
                  <h3 class="settings-group-title">Уведомления о намазах</h3>
                  <div class="setting-item">
                      <label for="fajr-toggle">Фаджр <span class="prayer-time-setting" id="fajr-time-setting"></span></label>
                      <div class="toggle-switch">
                          <input type="checkbox" id="fajr-toggle" checked>
                          <label for="fajr-toggle"></label>
                      </div>
                  </div>
                  <div class="setting-item">
                      <label for="dhuhr-toggle">Зухр <span class="prayer-time-setting" id="dhuhr-time-setting"></span></label>
                      <div class="toggle-switch">
                          <input type="checkbox" id="dhuhr-toggle" checked>
                          <label for="dhuhr-toggle"></label>
                      </div>
                  </div>
                  <div class="setting-item">
                      <label for="asr-toggle">Аср <span class="prayer-time-setting" id="asr-time-setting"></span></label>
                      <div class="toggle-switch">
                          <input type="checkbox" id="asr-toggle">
                          <label for="asr-toggle"></label>
                      </div>
                  </div>
                  <div class="setting-item">
                      <label for="maghrib-toggle">Магриб <span class="prayer-time-setting" id="maghrib-time-setting"></span></label>
                      <div class="toggle-switch">
                          <input type="checkbox" id="maghrib-toggle" checked>
                          <label for="maghrib-toggle"></label>
                      </div>
                  </div>
                  <div class="setting-item">
                      <label for="isha-toggle">Иша <span class="prayer-time-setting" id="isha-time-setting"></span></label>
                      <div class="toggle-switch">
                          <input type="checkbox" id="isha-toggle" checked>
                          <label for="isha-toggle"></label>
                      </div>
                  </div>
              </div>
          
              <div class="profile-actions">
                  <a href="#" class="action-item" id="help-link">
                      <i class="fas fa-question-circle"></i>
                      <span>Помощь и поддержка</span>
                      <i class="fas fa-chevron-right"></i>
                  </a>
                  <a href="mailto:feedback@ahavatfit.app?subject=AhavatFit%20App%20Feedback" class="action-item">
                      <i class="fas fa-paper-plane"></i>
                      <span>Отправить отзыв</span>
                      <i class="fas fa-chevron-right"></i>
                  </a>
                  <a href="#" class="action-item logout" id="logout-btn">
                      <i class="fas fa-sign-out-alt"></i>
                      <span>Выйти</span>
                  </a>
              </div>
          </section>
  
          <section id="help-page" class="page-section" style="display: none;">
              <button class="back-btn" id="help-back-btn"><i class="fas fa-arrow-left"></i> Назад в профиль</button>
  
              <div class="section-title" style="margin-top: 15px;">
                  <i class="fas fa-question-circle"></i>
                  <span>Помощь и поддержка</span>
              </div>
  
              <div class="faq-container">
                  <div class="faq-item">
                      <button class="faq-question">Как работает определение времени намазов?</button>
                      <div class="faq-answer">
                          <p>Для определения времени намазов мы используем вашу геолокацию. Приложение запрашивает ваше местоположение один раз в сутки и кеширует данные, чтобы не беспокоить вас слишком часто. Если вы откажете в доступе к геолокации или ее определение не удастся, приложение покажет время для Москвы.</p>
                      </div>
                  </div>
                  <div class="faq-item">
                      <button class="faq-question">Что такое AI-тренер и как им пользоваться?</button>
                      <div class="faq-answer">
                          <p>AI-тренер — это ваш персональный помощник на базе искусственного интеллекта. Вы можете задать ему любой вопрос о фитнесе, питании, здоровом образе жизни или Исламе. Просто введите ваш вопрос в текстовое поле или используйте голосовой ввод. Тренер постарается дать вам полезный и мотивирующий ответ.</p>
                      </div>
                  </div>
                  <div class="faq-item">
                      <button class="faq-question">Как включить тёмную тему?</button>
                      <div class="faq-answer">
                          <p>Перейдите на вкладку "Профиль". В разделе "Внешний вид" вы найдете переключатель "Тёмная тема". Просто активируйте его, и интерфейс приложения изменит свою цветовую схему на более тёмную, что может быть комфортнее для глаз в вечернее время.</p>
                      </div>
                  </div>
                  <div class="faq-item">
                      <button class="faq-question">Мой вопрос отсутствует в списке. Что делать?</button>
                      <div class="faq-answer">
                          <p>Если вы не нашли ответ на свой вопрос, вы можете связаться с нами напрямую. На странице "Профиль" есть кнопка "Отправить отзыв", которая откроет ваш почтовый клиент с уже готовым письмом для нас. Мы будем рады помочь!</p>
                      </div>
                  </div>
              </div>
          </section>

          <!-- ADMIN SECTION -->
          <section id="admin-page" class="page-section" style="display: none;">
            <div class="section-title" style="margin-top: 15px;">
                <i class="fas fa-user-shield"></i>
                <span>Панель администратора</span>
            </div>

            <div class="settings-group">
                <h3 class="settings-group-title">Аналитика пользователей</h3>
                <div class="analytics-summary">
                    <div class="summary-item">
                        <div class="value" id="total-users-stat">0</div>
                        <div class="label">Всего</div>
                    </div>
                    <div class="summary-item">
                        <div class="value" id="new-users-stat">0</div>
                        <div class="label">Новых</div>
                    </div>
                    <div class="summary-item">
                        <div class="value" id="active-users-stat">0</div>
                        <div class="label">Активных</div>
                    </div>
                </div>
                <div class="admin-chart-container">
                    <h4 class="admin-chart-title">Регистрации за 6 месяцев</h4>
                    <div class="chart-container" id="user-analytics-chart">
                        <!-- User analytics chart will be rendered here -->
                    </div>
                </div>
            </div>

            <div class="settings-group">
                <div class="admin-group-header">
                    <h3 class="settings-group-title">Управление тренировками</h3>
                    <button class="btn btn-sm" id="add-workout-btn"><i class="fas fa-plus"></i> Добавить</button>
                </div>
                <div id="admin-workout-list" class="admin-items-list">
                    <!-- Admin workout list will be rendered here -->
                </div>

                <h4 class="settings-group-subtitle">Управление категориями</h4>
                <div id="admin-category-list" class="admin-items-list">
                    <!-- Admin category list will be rendered here -->
                </div>
                <form id="add-category-form" class="add-category-form">
                    <input type="text" id="new-category-name" placeholder="Новая категория" required>
                    <button type="submit" class="btn btn-sm"><i class="fas fa-plus"></i></button>
                </form>
            </div>

            <div class="settings-group">
                <div class="admin-group-header">
                    <h3 class="settings-group-title">Управление рецептами</h3>
                    <button class="btn btn-sm" id="add-recipe-btn"><i class="fas fa-plus"></i> Добавить</button>
                </div>
                <div id="admin-recipe-list" class="admin-items-list">
                    <!-- Admin recipe list will be rendered here -->
                </div>
            </div>
          </section>
      </div>
  
      <nav class="bottom-nav">
          <a href="#" class="nav-item active" data-page="home">
              <i class="fas fa-home"></i>
              <span>Главная</span>
          </a>
          <a href="#" class="nav-item" data-page="workouts">
              <i class="fas fa-dumbbell"></i>
              <span>Тренировки</span>
          </a>
          <a href="#" class="nav-item" data-page="ai-coach">
              <i class="fas fa-robot"></i>
              <span>AI-тренер</span>
          </a>
          <a href="#" class="nav-item" data-page="recipes">
              <i class="fas fa-book-open"></i>
              <span>Рецепты</span>
          </a>
          <a href="#" class="nav-item" data-page="profile">
              <i class="fas fa-user"></i>
              <span>Профиль</span>
          </a>
          <a href="#" class="nav-item" data-page="admin" id="admin-nav-item" style="display: none;">
            <i class="fas fa-user-shield"></i>
            <span>Админ</span>
        </a>
      </nav>
    </div>
    
    <!-- RECIPE DETAIL MODAL -->
    <div id="recipe-detail-modal" class="modal-overlay" style="display: none;">
      <div class="modal-content recipe-modal-content">
          <div id="recipe-detail-content">
              <!-- Recipe details will be injected here -->
          </div>
          <div class="modal-actions">
              <button type="button" class="btn" id="close-recipe-detail-btn">Закрыть</button>
          </div>
      </div>
    </div>


    <!-- GOAL FORM MODAL -->
    <div id="goal-form-modal" class="modal-overlay" style="display: none;">
      <div class="modal-content">
          <h2 id="goal-modal-title">Установить фитнес-цель</h2>
          <form id="goal-form">
              <div class="form-group">
                  <label for="goal-type">Выберите вашу цель</label>
                  <select id="goal-type" required>
                      <option value="lose_weight">Сбросить вес</option>
                      <option value="gain_muscle">Набрать мышечную массу</option>
                      <option value="improve_flexibility">Улучшить гибкость</option>
                      <option value="increase_endurance">Повысить выносливость</option>
                  </select>
              </div>
              <div class="form-group-row">
                  <div class="form-group">
                      <label for="goal-start-value" id="goal-start-label">Начальный вес (кг)</label>
                      <input type="number" id="goal-start-value" required>
                  </div>
                  <div class="form-group">
                    <label for="goal-current-value" id="goal-current-label">Текущий вес (кг)</label>
                    <input type="number" id="goal-current-value" required>
                </div>
              </div>
              <div class="form-group">
                  <label for="goal-target-value" id="goal-target-label">Целевой вес (кг)</label>
                  <input type="number" id="goal-target-value" required>
              </div>
              <div class="modal-actions">
                  <button type="button" class="btn btn-outline" id="cancel-goal-btn">Отмена</button>
                  <button type="submit" class="btn">Сохранить</button>
              </div>
          </form>
      </div>
    </div>


    <!-- RECIPE FORM MODAL -->
    <div id="recipe-form-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2 id="recipe-modal-title">Добавить рецепт</h2>
            <form id="recipe-form">
                <input type="hidden" id="recipe-id">
                <div class="form-group">
                    <label for="recipe-name">Название</label>
                    <input type="text" id="recipe-name" required>
                </div>
                <div class="form-group">
                    <label for="recipe-category">Категория</label>
                    <select id="recipe-category" required>
                        <option value="Завтрак">Завтрак</option>
                        <option value="Обед">Обед</option>
                        <option value="Ужин">Ужин</option>
                        <option value="Снеки">Снеки</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="recipe-description">Описание</label>
                    <textarea id="recipe-description" rows="3" required></textarea>
                </div>
                
                <div class="dynamic-list-group">
                    <label>Ингредиенты</label>
                    <div id="ingredients-list">
                        <!-- Dynamic inputs will be here -->
                    </div>
                    <button type="button" class="btn-add-item" id="add-ingredient-btn"><i class="fas fa-plus"></i> Добавить ингредиент</button>
                </div>

                <div class="dynamic-list-group">
                    <label>Инструкции</label>
                    <div id="instructions-list">
                        <!-- Dynamic inputs will be here -->
                    </div>
                    <button type="button" class="btn-add-item" id="add-instruction-btn"><i class="fas fa-plus"></i> Добавить шаг</button>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn btn-outline" id="cancel-recipe-btn">Отмена</button>
                    <button type="submit" class="btn">Сохранить</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- WORKOUT FORM MODAL -->
    <div id="workout-form-modal" class="modal-overlay" style="display: none;">
      <div class="modal-content">
          <h2 id="workout-modal-title">Добавить тренировку</h2>
          <form id="workout-form">
              <input type="hidden" id="workout-id">
              <div class="form-group">
                  <label for="workout-title">Название</label>
                  <input type="text" id="workout-title" required>
              </div>
              <div class="form-group">
                  <label for="workout-category">Категория</label>
                  <select id="workout-category" required>
                      <option value="Кардио">Кардио</option>
                      <option value="Силовая">Силовая</option>
                      <option value="Растяжка">Растяжка</option>
                      <option value="Дыхание">Дыхание</option>
                  </select>
              </div>
              <div class="form-group">
                <label for="workout-description">Описание</label>
                <textarea id="workout-description" rows="3" required></textarea>
              </div>
              <div class="form-group-row">
                <div class="form-group">
                    <label for="workout-duration">Длительность (мин)</label>
                    <input type="number" id="workout-duration" required min="1">
                </div>
                <div class="form-group">
                    <label for="workout-calories">Калории (ккал)</label>
                    <input type="number" id="workout-calories" required min="1">
                </div>
              </div>
              <div class="form-group">
                  <label for="workout-video-url">URL видео (YouTube)</label>
                  <input type="url" id="workout-video-url" placeholder="https://www.youtube.com/watch?v=...">
              </div>
               <div class="form-group">
                  <label for="workout-alternative-video-url">Альтернативный URL (RuTube, VK, .mp4)</label>
                  <input type="url" id="workout-alternative-video-url" placeholder="https://.../video.mp4">
                   <p class="form-hint">Используйте это поле для видео, доступного в РФ без VPN.</p>
              </div>

              <div class="modal-actions">
                  <button type="button" class="btn btn-outline" id="cancel-workout-btn">Отмена</button>
                  <button type="submit" class="btn">Сохранить</button>
              </div>
          </form>
      </div>
    </div>
    
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script>
      // Конфигурация вашего проекта Firebase.
      // Эти данные можно найти в настройках проекта Firebase:
      // Project Settings > General > Your apps > Web app > Firebase SDK snippet > Config
      const firebaseConfig = {
        apiKey: "AIzaSyAAXn_XYzPWh0bGv61sJ196bs3O5FaNqMw",
        authDomain: "ahavatfit1.firebaseapp.com",
        projectId: "ahavatfit1",
        storageBucket: "ahavatfit1.appspot.com",
        messagingSenderId: "318670148839",
        appId: "1:318670148839:web:8617ead5db366c06c1be42"
      };

      // Улучшенная инициализация Firebase
      try {
        if (!firebaseConfig.apiKey || firebaseConfig.apiKey.includes("YOUR_")) {
          throw new Error("Firebase config is not set. Please update index.html with your actual Firebase project configuration.");
        }
        firebase.initializeApp(firebaseConfig);
        // Делаем сервис аутентификации доступным для нашего скрипта-модуля
        window.firebaseAuth = firebase.auth();
      } catch (error) {
        console.error("Firebase Initialization Error:", error.message);
        // Устанавливаем глобальный флаг, чтобы главный скрипт мог обнаружить эту ошибку
        window.firebaseConfigError = true;
      }
    </script>

    <!-- The main application script. The browser environment is expected to handle the .tsx file. -->
    <script type="module" src="index.js"></script>
  </body>
</html>