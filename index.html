<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AhavatFit</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#D4A5A5">
    <link rel="apple-touch-icon" href="/images/icon-192x192.png">
</head>
<body>
    
    <div id="auth-container">
        <!-- Login/Signup UI will be rendered here by auth.ts -->
    </div>

    <div id="app-container" style="display: none;">
        <main id="main-content">
            <!-- Home Page -->
            <div id="home-page" class="page">
                <div class="page-header">
                    <div class="header-logo">
                        <i class="fas fa-heart"></i>
                        <span>AhavatFit</span>
                    </div>
                    <button class="notification-btn"><i class="far fa-bell"></i></button>
                </div>
                <div class="page-content">
                    <!-- Dynamic content will be rendered here by home.ts -->
                </div>
            </div>

            <!-- Workouts Page -->
            <div id="workouts-page" class="page">
                 <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Тренировки</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                    <div id="workout-filters" class="chip-filters">
                        <!-- Chips will be rendered here -->
                    </div>
                    <div class="video-player-section">
                        <div class="video-player-container">
                           <!-- Video player will be rendered here -->
                        </div>
                        <div class="video-details">
                            <h3 id="video-title"></h3>
                            <p id="video-description"></p>
                            <div class="video-meta">
                                <span id="video-duration"><i class="far fa-clock"></i></span>
                                <span id="video-calories"><i class="far fa-fire"></i></span>
                            </div>
                            <button class="btn btn-primary complete-workout-btn">
                                <i class="far fa-check-circle"></i> Завершить тренировку
                            </button>
                        </div>
                    </div>
                    <h3 class="playlist-title">Плейлист</h3>
                    <div id="workouts-playlist" class="playlist-container">
                        <!-- Workout list will be rendered here -->
                    </div>
                </div>
            </div>

            <!-- Nutrition Page (New in Phase V) -->
            <div id="nutrition-page" class="page">
                <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Питание</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                     <!-- Nutrition content rendered by nutrition.ts -->
                </div>
            </div>

            <!-- Serenity Page (Now accessed from Profile) -->
            <div id="serenity-page" class="page">
                <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Моменты для души</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                    <!-- Serenity content will be rendered here by serenity.ts -->
                </div>
            </div>

            <!-- Community Page -->
            <div id="community-page" class="page">
                <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Сообщество</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                    <!-- Community feed will be rendered here by community.ts -->
                </div>
            </div>

            <!-- Cycle Page -->
            <div id="cycle-page" class="page">
                 <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Ваш цикл</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                    <!-- Calendar and other cycle info will be rendered here by cycle.ts -->
                </div>
            </div>
            
            <!-- AI Coach Page -->
            <div id="ai-coach-page" class="page">
                 <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>AI-тренер</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                    <div class="ai-chat-container">
                        <div id="ai-response" class="ai-response">
                            <!-- Chat messages will be appended here -->
                        </div>
                        <div class="ai-suggestions">
                            <div id="ai-suggestion-chips" class="chip-filters">
                                <!-- Suggestion chips will be loaded here -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="ai-input-area">
                    <span id="ai-status-text" class="ai-status-text"></span>
                    <form id="ai-coach-form" class="ai-coach-form">
                        <button type="button" id="ai-mic-btn" class="mic-btn" aria-label="Голосовой ввод"><i class="fas fa-microphone"></i></button>
                        <input type="text" id="ai-prompt-input" placeholder="Спросите Амину о чем-нибудь...">
                        <button type="submit" id="ai-submit-btn" class="submit-btn" aria-label="Отправить"><i class="fas fa-paper-plane"></i></button>
                    </form>
                </div>
            </div>

            <!-- Food Page (Replaced by Nutrition) -->
            <div id="food-page" class="page">
                <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Книга рецептов</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content" id="food-recipes-view">
                    <div id="recipe-filters" class="chip-filters">
                        <!-- Recipe filter chips rendered here -->
                    </div>
                    <div id="recipe-view" class="recipe-grid">
                        <!-- Recipe cards rendered here -->
                    </div>
                </div>
            </div>

            <!-- Programs Page (Phase VII) -->
            <div id="programs-page" class="page">
                 <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Программы</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                    <!-- Programs content rendered by programs.ts -->
                </div>
            </div>
            
            <!-- Profile Page -->
            <div id="profile-page" class="page">
                 <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Профиль</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                     <!-- Profile content rendered by profile.ts -->
                </div>
            </div>
            
            <!-- Admin Page -->
            <div id="admin-page" class="page">
                 <div class="page-header">
                    <button class="back-btn"><i class="fas fa-arrow-left"></i></button>
                    <h2>Панель администратора</h2>
                    <div class="header-placeholder"></div>
                </div>
                <div class="page-content">
                    <!-- Admin content rendered by admin.ts -->
                </div>
            </div>

        </main>
        
        <nav class="nav-bar">
            <div class="nav-item" data-page="home">
                <i class="fa-regular fa-house"></i>
                <span>Главная</span>
            </div>
            <div class="nav-item" data-page="workouts">
                <i class="fa-regular fa-dumbbell"></i>
                <span>Тренировки</span>
            </div>
            <div class="nav-item" data-page="nutrition">
                <i class="fa-regular fa-apple-whole"></i>
                <span>Питание</span>
            </div>
            <div class="nav-item" data-page="community">
                <i class="fa-regular fa-users"></i>
                <span>Сообщество</span>
            </div>
            <div class="nav-item" data-page="profile">
                <i class="fa-regular fa-user"></i>
                <span>Профиль</span>
            </div>
        </nav>
    </div>

    <!-- Modals -->
    <div id="recipe-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="recipe-detail-content"></div>
        </div>
    </div>
    
    <div id="goal-form-modal" class="modal">
        <div class="modal-content">
             <span class="close-btn">&times;</span>
             <h3>Постановка цели с AI-помощником</h3>
             <div class="goal-chat-window">
                <div id="goal-chat-response" class="ai-response">
                    <!-- Goal chat messages go here -->
                </div>
             </div>
             <div class="ai-input-area">
                <span id="goal-chat-status-text" class="ai-status-text"></span>
                <form id="goal-chat-form" class="ai-coach-form">
                    <input type="text" id="goal-chat-input" placeholder="Опишите вашу цель...">
                    <button type="submit" id="goal-chat-submit-btn" class="submit-btn"><i class="fas fa-paper-plane"></i></button>
                </form>
             </div>
        </div>
    </div>
    
    <div id="achievement-modal" class="modal">
        <div class="modal-content">
            <div id="achievement-modal-content">
                <!-- Achievement content rendered here by ui.ts -->
            </div>
        </div>
    </div>

     <div id="share-success-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="share-success-content">
                 <h3>Поделитесь своей радостью!</h3>
                 <p>Ваш успех может вдохновить других сестёр. Поделитесь своими ощущениями анонимно.</p>
                 <textarea id="share-success-textarea" class="form-input" rows="3" placeholder="Например: Чувствую себя полной сил и благодарности!"></textarea>
                 <button id="share-success-btn" class="btn">Поделиться анонимно</button>
            </div>
        </div>
    </div>

    <div id="onboarding-modal" class="modal">
        <div class="modal-content onboarding-content">
            <!-- Step 1: Name -->
            <div class="onboarding-step" id="onboarding-step-1">
                <h2>Добро пожаловать в AhavatFit!</h2>
                <p>Как мы можем к вам обращаться?</p>
                <input type="text" id="onboarding-name" placeholder="Введите ваше имя" class="form-input">
                <button class="btn next-btn">Далее</button>
            </div>
        </div>
    </div>

    <!-- Phase VI: Cycle Log Modal -->
    <div id="cycle-log-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <form id="cycle-log-form">
                <h3 id="cycle-log-modal-title">Как вы себя чувствуете?</h3>
                <input type="hidden" id="cycle-log-date">
                
                <div class="form-group">
                    <label>Менструация</label>
                    <div id="period-chips" class="chip-filters">
                        <button type="button" class="chip" data-period="none">Нет</button>
                        <button type="button" class="chip" data-period="start">Начало</button>
                        <button type="button" class="chip" data-period="flow">Идут</button>
                        <button type="button" class="chip" data-period="end">Конец</button>
                    </div>
                </div>

                <div class="form-group">
                    <label>Симптомы</label>
                    <div id="symptom-chips" class="chip-filters">
                        <!-- Symptom chips rendered by cycle.ts -->
                    </div>
                </div>

                <div class="form-group">
                    <label>Настроение</label>
                    <div id="mood-chips" class="chip-filters">
                         <!-- Mood chips rendered by cycle.ts -->
                    </div>
                </div>

                <div class="form-group">
                    <label for="cycle-notes">Заметки</label>
                    <textarea id="cycle-notes" class="form-input" rows="2" placeholder="Добавьте любые детали..."></textarea>
                </div>

                <button type="submit" class="btn">Сохранить</button>
            </form>
        </div>
    </div>

    <!-- Phase VII: Program Detail Modal -->
    <div id="program-detail-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="program-detail-content">
                <!-- Program details rendered by programs.ts -->
            </div>
        </div>
    </div>
    
    <div id="loading-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>

    <script type="importmap">
    {
      "imports": {
        "firebase/": "https://aistudiocdn.com/firebase@^12.2.1/",
        "@google/genai": "https://aistudiocdn.com/@google/genai@^1.17.0"
      }
    }
    </script>
    <script type="module" src="index.js"></script>

</body>
</html>